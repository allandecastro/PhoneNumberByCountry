{
    "definitions": {
        "manifest": {
            "type": "object",
            "properties": {
                "control": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/control" },
                    "maxItems": 1
                }
            },
            "required": ["control"],
            "additionalProperties": false
        },
        
        "control": {
            "type": "object",
            "properties": {
                "$": { "$ref": "#/definitions/controlAttribs" },
                "type-group": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/type-group" }
                },
                "property": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/property" }
                },
                "common-property": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/common-property" }
                },
                "property-dependencies": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/propertyDependencies" },
                    "maxItems": 1
                },
                "data-set": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/dataSet" }
                },
                "resources": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/resource" },
                    "maxItems": 1
                },
                "feature-usage": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/featureUsage" },
                    "maxItems": 1
                },
                "event": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/event" }
                },
                "common-event": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/commonEvent" }
                },
                "subscribed-functionalities": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/subscribed-functionalities" },
                    "maxItems": 1
                }
            },
            "required": ["$", "resources"],
            "additionalProperties": false
        },

        "controlAttribs": {
            "type": "object",
            "properties": {
                "namespace": {
                    "type": "string",
                    "pattern": "^(?!\\.|\\d)(?!.*\\.$)(?!.*?\\.\\d)(?!.*?\\.\\.)[a-zA-Z0-9.]+$"
                },
                "constructor": {
                    "type": "string",
                    "pattern": "^(?!\\d)[a-zA-Z0-9]+$"
                },
                "version": { "$ref": "#/definitions/versionType" },
                "display-name-key": { "type": "string" },
                "description-key": { "type": "string" },
                "control-type": {
                    "type": "string",
                    "enum": ["standard", "virtual" ]
                },
                "preview-image": { "type": "string" },
                "api-version": { "type": "string" },
                "design-mapping-file": { "type": "string" },
                "authoring-manifest": { "type": "string" },
                "hidden": { "$ref": "#/definitions/booleanType" }
            },
            "required": ["namespace", "constructor", "version", "display-name-key"],
            "additionalProperties": false
        },

        "property": {
            "type": "object",
            "properties": {
                "$": { "$ref": "#/definitions/propertyAttribs" },
                "value": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/enum" }
                }
            },
            "required": ["$"],
            "additionalProperties": false
        },
        
        "common-property": {
            "type": "object",
            "properties": {
                "$": { "$ref": "#/definitions/commonPropertyAttribs" },
                "value": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/enum" }
                }
            },
            "required": ["$"],
            "additionalProperties": false
        },
        
        "propertyAttribs": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "usage": { "$ref": "#/definitions/usageType" },
                "required": { "$ref": "#/definitions/booleanType" },
                "of-type" : { "$ref": "#/definitions/dataType" },
                "of-type-group": { "type": "string" },
                "display-name-key": { "type": "string" },
                "description-key": { "type": "string" },
                "default-value": { "type": "string" },
                "resettable": { "$ref": "#/definitions/booleanType" },
                "hidden": { "$ref": "#/definitions/booleanType" }
            },
            "required": ["name", "usage", "display-name-key"],
            "additionalProperties": false
        },
        
        "commonPropertyAttribs": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "null-default": { "type": "string" },
                "default-value": { "type": "string" },
                "phone-default-value": { "type": "string" },
                "web-default-value": { "type": "string" }
            },
            "required": ["name", "default-value"],
            "additionalProperties": false
        },

        "subscribed-functionalities": {
            "type": "object",
            "properties": {
                "subscribed-functionality": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/subscribed-functionality" }
                }
            }
        },

        "subscribed-functionality": {
            "type": "object",
            "properties": {
                "$": { "$ref": "#/definitions/subFuncAttribs" }
            },
            "required": ["$"],
            "additionalProperties": false
        },

        "subFuncAttribs": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "value": { "type": "string" }
            },
            "required": ["name", "value"],
            "additionalProperties": false
        },

        "event": {
            "type": "object",
            "properties": {
                "$": { "$ref": "#/definitions/eventAttribs" }
            },
            "required": ["$"],
            "additionalProperties": false
        },

        "eventAttribs": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "display-name-key": { "type": "string" },
                "description-key": { "type": "string" },
                "hidden": { "$ref": "#/definitions/booleanType" }
            },
            "required": ["name"],
            "additionalProperties": false
        },

        "commonEvent": {
            "type": "object",
            "properties": {
                "$": { "$ref": "#/definitions/commonEventAttribs" }
            },
            "required": ["$"],
            "additionalProperties": false
        },

        "commonEventAttribs": {
            "type": "object",
            "properties": {
                "name": { "$ref": "#/definitions/commonEventType" }
            },
            "required": ["name"],
            "additionalProperties": false
        },

        "propertyDependencies": {
            "type": "object",
            "properties": {
                "property-dependency": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/propertyDependency" }
                }
            },
            "required": ["property-dependency"],
            "additionalProperties": false
        },

        "propertyDependency": {
            "type": "object",
            "properties": {
                "$": { "$ref": "#/definitions/propertyDependencyAttribs" }
            },
            "required": ["$"],
            "additionalProperties": false
        },

        "propertyDependencyAttribs": {
            "type": "object",
            "properties": {
                "input": { "type": "string" },
                "output": { "type": "string" },
                "required-for": { "type": "string" }
            },
            "required": ["input", "output", "required-for"],
            "additionalProperties": false
        },

        "enum": {
            "type": "object",
            "properties": {
                "$": { "$ref": "#/definitions/enumAttribs" },
                "_": { "type": "string" }
            },
            "required": ["$", "_"],
            "additionalProperties": false
        },

        "enumAttribs": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "display-name-key": { "type": "string" },
                "description-key": { "type": "string" },
                "default": { "type": "string" }
            },
            "required": ["name", "display-name-key"],
            "additionalProperties": false
        },

        "propertySet": {
            "type": "object",
            "properties": {
                "$": { "$ref": "#/definitions/propertySetAttribs" }
            },
            "required": ["$"],
            "additionalProperties": false
        },
        
        "propertySetAttribs": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "usage": { "$ref": "#/definitions/usageType" },
                "required": { "$ref": "#/definitions/booleanType" },
                "of-type" : { "$ref": "#/definitions/dataType" },
                "of-type-group": { "type": "string" },
                "display-name-key": { "type": "string" },
                "description-key": { "type": "string" }
            },
            "required": ["name", "usage", "display-name-key"],
            "additionalProperties": false
        },

        "dataSet": {
            "type": "object",
            "properties": {
                "$": { "$ref": "#/definitions/dataSetAttribs" },
                "property-set": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/propertySet" }
                }
            },
            "required": ["$"],
            "additionalProperties": false
        },
        
        "dataSetAttribs": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "display-name-key": { "type": "string" },
                "description-key": { "type": "string" },
                "cds-data-set-options": { "type": "string" },
                "allow-default-selected-items": { "$ref": "#/definitions/booleanType" }
            },
            "required": ["name", "display-name-key"],
            "additionalProperties": false
        },

        "featureUsage": {
            "type": "object",
            "properties": {
                "uses-feature": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/usesFeature" }
                },
                "uses-connector": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/usesConnector" }
                }
            },
            "additionalProperties": false
        },

        "usesFeature": {
            "type": "object",
            "properties": {
                "$": { "$ref": "#/definitions/usesFeatureAttribs" }
            },
            "required": ["$"],
            "additionalProperties": false
        },
        
        "usesFeatureAttribs": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "type": { "$ref": "#/definitions/usesFeatureType" },
                "required": { "$ref": "#/definitions/booleanType" }
            },
            "required": ["name", "required"],
            "additionalProperties": false
        },

        "usesConnector": {
            "type": "object",
            "properties": {
                "$": { "$ref": "#/definitions/usesConnectorAttribs" }
            },
            "required": ["$"],
            "additionalProperties": false
        },

        "usesConnectorAttribs": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "id": { "type": "string" },
                "required": { "$ref": "#/definitions/booleanType" }
            },
            "required": ["name", "id", "required"],
            "additionalProperties": false
        },

        "type-group": {
            "type": "object",
            "properties": {
                "$": {
                    "type": "object",
                    "properties": {
                        "name": { "type": "string" }
                    },
                    "required": ["name"],
                    "additionalProperties": false
                },
                "type": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/dataType" }
                }
            },
            "required": ["$", "type"],
            "additionalProperties": false
        },

        "resource": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/code" },
                    "maxItems": 1
                },
                "css": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/css" }
                },
                "resx": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/resx" }
                },
                "img": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/img" }
                },
                "html": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/html" }
                },
                "library": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/library" }
                }
            },
            "required": ["code"],
            "additionalProperties": false
        },
        
        "code": {
            "type": "object",
            "properties": {
                "$": {
                    "type": "object",
                    "properties": {
                        "path": { "type": "string", "pattern": "^.+\\.ts$", "minLength": 1 },
                        "order": { "$ref": "#/definitions/orderType" }
                    },
                    "required": ["path", "order"],
                    "additionalProperties": false
                }
            },
            "required": ["$"],
            "additionalProperties": false
        },

        "css": {
            "type": "object",
            "properties": {
                "$": {
                    "type": "object",
                    "properties": {
                        "path": { "$ref": "#/definitions/pathType" },
                        "order": { "$ref": "#/definitions/orderType" }
                    },
                    "required": ["path"],
                    "additionalProperties": false
                }
            },
            "required": ["$"],
            "additionalProperties": false
        },

        "img": {
            "type": "object",
            "properties": {
                "$": {
                    "type": "object",
                    "properties": {
                        "path": { "$ref": "#/definitions/pathType" }
                    },
                    "required": ["path"],
                    "additionalProperties": false
                }
            },
            "required": ["$"],
            "additionalProperties": false
        },

        "html": {
            "type": "object",
            "properties": {
                "$": {
                    "type": "object",
                    "properties": {
                        "path": { "$ref": "#/definitions/pathType" },
                        "order": { "$ref": "#/definitions/orderType" }
                    },
                    "required": ["path"],
                    "additionalProperties": false
                }
            },
            "required": ["$"],
            "additionalProperties": false
        },

        "library": {
            "type": "object",
            "properties": {
                "$": {
                    "type": "object",
                    "properties": {
                        "name": { "type": "string" },
                        "version": { "$ref": "#/definitions/versionType" },
                        "order": { "$ref": "#/definitions/orderType" }
                    },
                    "required": ["name", "version", "order"],
                    "additionalProperties": false
                },
                "packaged_library": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/packagedLibrary" },
                    "maxItems": 1
                },
                "required": ["$"],
                "additionalProperties": false
            }
        },

        "resx": {
            "type": "object",
            "properties": {
                "$": {
                    "type": "object",
                    "properties": {
                        "path": { "$ref": "#/definitions/pathType" },
                        "version": { "$ref": "#/definitions/versionType" }
                    },
                    "required": ["path", "version"],
                    "additionalProperties": false
                }
            },
            "required": ["$"],
            "additionalProperties": false
        },

        "packagedLibrary": {
            "type": "object",
            "properties": {
                "$": {
                    "type": "object",
                    "properties": {
                        "path": { "$ref": "#/definitions/pathType" },
                        "version": { "$ref": "#/definitions/versionType" }
                    },
                    "required": ["path", "version"],
                    "additionalProperties": false
                }
            },
            "required": ["$"],
            "additionalProperties": false
        },

        "orderType": {
            "type": "string",
            "pattern": "^[1-9]\\d*$"
        },
        "versionType": {
            "type": "string",
            "pattern": "^[\\^=>]*\\d+(\\.\\d+)*$"
        },
        "pathType": { 
            "type": "string",
            "minLength": 1
        },
        "booleanType": {
            "type": "string",
            "enum": ["true", "false"]
        },
        "usageType": {
            "type": "string",
            "enum": ["bound", "input", "output"]
        },
        "usesFeatureType": {
            "type": "string",
            "enum": ["api"]
        },
        "dataType": {
            "type": "string",
            "enum": [
                "Whole.None",
                "TwoOptions",
                "DateAndTime.DateOnly",
                "DateAndTime.DateAndTime",
                "Decimal",
                "Enum",
                "FP",
                "Multiple",
                "Currency",
                "OptionSet",
                "SingleLine.Email",
                "SingleLine.Text",
                "SingleLine.TextArea",
                "SingleLine.URL",
                "SingleLine.Ticker",
                "SingleLine.Phone",
                "Object",
                "File",
                "Lookup.Simple",
                "Lookup.Customer",
                "Lookup.Owner",
                "Lookup.PartyList",
                "Lookup.Regarding"
            ]
        },
        "commonEventType": {
            "type": "string",
            "enum": [
                "OnSelect",
                "OnChange"
            ]
        }
    },

    "type": "object",
    "properties": {
        "manifest": { "$ref": "#/definitions/manifest" }
    },
    "required": ["manifest"]
}